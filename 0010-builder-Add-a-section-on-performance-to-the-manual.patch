From 699aa8c4bd1926b2de3e9b10354a3f17d5929c92 Mon Sep 17 00:00:00 2001
From: "Richard W.M. Jones" <rjones@redhat.com>
Date: Sun, 27 Oct 2013 14:59:39 +0000
Subject: [PATCH] builder: Add a section on performance to the manual.

(cherry picked from commit 2937c035958f84986e84c47df49f79d19c4b5b59)
---
 builder/virt-builder.pod | 43 +++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 43 insertions(+)

diff --git a/builder/virt-builder.pod b/builder/virt-builder.pod
index a5f766d..cd20043 100644
--- a/builder/virt-builder.pod
+++ b/builder/virt-builder.pod
@@ -1330,6 +1330,49 @@ want clones to have duplicate identities.
 
 See also: L<virt-sysprep(1)>.
 
+=head2 PERFORMANCE
+
+The most important aspect of getting good performance is caching.
+Templates gets downloaded into the cache the first time they are used,
+or if you use the I<--cache-all-templates> option.  See L</CACHING>
+above for further information.
+
+Packages required for the I<--install> option are downloaded using the
+host network connection.  Setting the C<http_proxy>, C<https_proxy>
+and C<ftp_proxy> environment variables to point to a local web cache
+may ensure they only need to be downloaded once.  You can also try
+using a local package repository, although this can be complex to set
+up and varies according to which Linux distro you are trying to
+install.
+
+=head3 Skipping virt-resize
+
+Virt-builder can skip the virt-resize step under certain conditions.
+This makes virt-builder much faster.  The conditions are:
+
+=over 4
+
+=item *
+
+the output must be a regular file (not a block device), B<and>
+
+=item *
+
+the user did B<not> use the I<--size> option, B<and>
+
+=item *
+
+the output format is the same as the template format (usually raw).
+
+=back
+
+=head3 pxzcat
+
+Virt-builder can use C<pxzcat> (parallel xzcat) if available to
+uncompress the templates.  The default is to use regular C<xzcat>
+which is single-threaded.  Currently this has to be compiled in,
+ie. virt-builder will probably need to be recompiled to use pxzcat.
+
 =head2 USER MODE LINUX
 
 You can use virt-builder with the User-Mode Linux (UML) backend.  This
-- 
1.8.5.3

