From 4a845bf6ea5b72381b579df0d4ca9ead4271b55e Mon Sep 17 00:00:00 2001
From: "Richard W.M. Jones" <rjones@redhat.com>
Date: Tue, 18 Feb 2014 15:12:13 +0000
Subject: [PATCH] ppc64: Disable hpet fragment in libvirt XML.

Related change in commit 62cb3a606d4b349d45f2d178945a998a90d1e130.
---
 src/launch-libvirt.c | 7 ++-----
 1 file changed, 2 insertions(+), 5 deletions(-)

diff --git a/src/launch-libvirt.c b/src/launch-libvirt.c
index 9e59e36..1bfc069 100644
--- a/src/launch-libvirt.c
+++ b/src/launch-libvirt.c
@@ -1013,12 +1013,9 @@ construct_libvirt_xml_cpu (guestfs_h *g,
     } end_element ();
 
     /* libvirt has a bug (RHBZ#1066145) where it adds the -no-hpet
-     * flag on ARM even though this causes qemu-system-arm to break
-     * and ARM has never had a High Precision Timer anyway.  It's not
-     * worth arguing about who is right or wrong here, just disable
-     * this XML fragment on ARM.
+     * flag on ARM & ppc64.
      */
-#ifndef __arm__
+#if !defined(__arm__) && !defined(__powerpc__)
     start_element ("timer") {
       attribute ("name", "hpet");
       attribute ("present", "no");
-- 
1.8.4.2

